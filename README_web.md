# FLAVR Web应用使用指南

## 🎬 简介

这是一个基于Gradio的FLAVR视频补帧Web应用，提供了友好的图形界面来使用FLAVR模型进行视频帧插值。

## 📋 功能特性

- 🎥 支持多种视频格式 (MP4, AVI, MOV等)
- ⚡ 支持2x, 4x, 8x插值倍数
- 🎛️ 可调节输出帧率
- 🖥️ 友好的Web界面
- 📊 实时处理状态显示
- 🎯 自动分辨率调整

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 下载预训练模型

从以下链接下载对应的预训练模型：

| 插值倍数 | 模型链接 | 适用场景 |
|---------|---------|---------|
| **2x** | [下载](https://drive.google.com/file/d/1IZe-39ZuXy3OheGJC-fT3shZocGYuNdH/view?usp=sharing) | 30FPS → 60FPS |
| **4x** | [下载](https://drive.google.com/file/d/1GARJK0Ti1gLH_O0spxAEqzbMwUKqE37S/view?usp=sharing) | 30FPS → 120FPS |
| **8x** | [下载](https://drive.google.com/file/d/1xoZqWJdIOjSaE2DtH4ifXKlRwFySm5Gq/view?usp=sharing) | 30FPS → 240FPS |

### 3. 启动Web应用

#### 方法一：使用启动脚本（推荐）
```bash
python start_web.py
```

#### 方法二：直接运行
```bash
python web_app.py
```

#### 方法三：自定义参数
```bash
python start_web.py --port 8080 --share --debug
```

### 4. 访问界面

打开浏览器访问：`http://localhost:7860`

## 📖 使用说明

### 界面布局

```
┌─────────────────────────────────────────────────────────────┐
│                    FLAVR 视频补帧工具                        │
├─────────────────────┬───────────────────────────────────────┤
│      输入设置        │             输出结果                  │
│                     │                                     │
│ 📁 上传视频文件      │  🎬 处理结果视频                      │
│ 📁 选择模型文件      │                                     │
│ 🎛️ 插值倍数 (2/4/8) │  📊 处理状态信息                      │
│ 🎛️ 目标帧率         │                                     │
│                     │                                     │
│ [开始处理]           │                                     │
└─────────────────────┴───────────────────────────────────────┘
```

### 操作步骤

1. **上传视频文件**
   - 点击"上传视频文件"按钮
   - 选择要处理的视频文件
   - 支持格式：MP4, AVI, MOV, MKV等

2. **选择模型文件**
   - 点击"选择模型文件"按钮
   - 选择对应的.pth预训练模型
   - 确保模型与插值倍数匹配

3. **设置参数**
   - **插值倍数**: 选择2x, 4x, 或8x
   - **目标帧率**: 设置输出视频的帧率

4. **开始处理**
   - 点击"开始处理"按钮
   - 等待处理完成
   - 查看处理状态和结果

### 参数说明

| 参数 | 说明 | 推荐值 |
|------|------|--------|
| **插值倍数** | 视频帧数增加的倍数 | 2x (常用), 4x, 8x |
| **目标帧率** | 输出视频的帧率 | 30FPS, 60FPS, 120FPS |

## ⚙️ 高级配置

### 命令行参数

```bash
python start_web.py [选项]

选项:
  --port PORT        服务器端口 (默认: 7860)
  --host HOST        服务器地址 (默认: 0.0.0.0)
  --share            生成公共访问链接
  --debug            开启调试模式
```

### 环境要求

- **Python**: 3.7+
- **CUDA**: 推荐使用GPU加速 (可选)
- **内存**: 建议8GB+ RAM
- **存储**: 足够的磁盘空间存储处理后的视频

## 🔧 故障排除

### 常见问题

1. **模型加载失败**
   ```
   解决方案: 检查模型文件路径和格式是否正确
   ```

2. **视频处理失败**
   ```
   解决方案: 检查视频格式是否支持，尝试转换格式
   ```

3. **内存不足**
   ```
   解决方案: 降低视频分辨率或使用更小的视频文件
   ```

4. **CUDA错误**
   ```
   解决方案: 检查CUDA版本兼容性，或使用CPU模式
   ```

### 性能优化

- 使用GPU加速处理
- 降低输入视频分辨率
- 使用SSD存储提高I/O性能
- 关闭其他占用内存的程序

## 📝 示例

### 基本使用示例

```python
# 启动应用
python start_web.py --port 8080

# 访问界面
# 1. 上传30FPS视频
# 2. 选择2x模型
# 3. 设置目标帧率60FPS
# 4. 开始处理
# 5. 下载60FPS结果视频
```

### 批量处理

如果需要批量处理多个视频，可以修改`web_app.py`中的处理逻辑，或使用原始的`interpolate.py`脚本。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个Web应用！

## 📄 许可证

本项目遵循原始FLAVR项目的许可证。

## 🔗 相关链接

- [FLAVR原始项目](https://github.com/tarun005/FLAVR)
- [Gradio文档](https://gradio.app/)
- [PyTorch文档](https://pytorch.org/) 